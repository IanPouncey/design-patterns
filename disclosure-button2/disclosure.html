<!DOCTYPE html>

<html lang="en">
<head>
    <title>Disclosure button: span element</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" href="css/basic.css" />
    <link rel="stylesheet" type="text/css" href="css/disclosure.css" />
    <script type="text/javascript" src="js/disclosure.js"></script>
</head>

<body>
    <h1>Disclosure button: span element</h1>

    <p>The disclosure button on this page has been created using the <a href="http://www.w3.org/TR/html/text-level-semantics.html#the-span-element"><code>&lt;span&gt;</code></a> element, with scripting to provide the expected behaviour. This design pattern uses <a href="http://www.w3.org/TR/wai-aria/">ARIA</a> to polyfill accessibility.</p>

    <h2>Example</h2>

    <div id="example">
        <span id="button" tabindex="0" role="button" aria-expanded="false" aria-controls="content">Foo</span>

        <div id="content" aria-hidden="true">
            <p>Lorem ipsum dolar sit amet...</p>
        </div>
    </div>

    <h2>Code</h2>

    <h3>HTML</h3>
    <pre>
<code>
&lt;span id=&quot;button&quot; tabindex=&quot;0&quot; role=&quot;button&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;content&quot;&gt;Foo&lt;/span&gt;

&lt;div id=&quot;content&quot; aria-hidden=&quot;true&quot;&gt;
&lt;p&gt;Lorem ipsum dolar sit amet...&lt;/p&gt;
&lt;/div&gt;
</code>
</pre>

    <h3>JavaScript</h3>
    <pre>
<code>
function init()
{
        document.getElementById(&quot;button&quot;).addEventListener(&quot;click&quot;, toggleDisclosure);
        document.getElementById(&quot;button&quot;).addEventListener(&quot;keydown&quot;, toggleDisclosure);
}

function toggleDisclosure(event)
{
        var type = event.type;
        var button = document.getElementById(&quot;button&quot;);
        var content = document.getElementById(&quot;content&quot;);

        if (type === &quot;keydown&quot; &amp;&amp; (event.keyCode !== 13 &amp;&amp; event.keyCode !== 32))
        {
                return true
        }

    if(content.getAttribute(&quot;aria-hidden&quot;) == &quot;true&quot;)
        {
                content.setAttribute(&quot;aria-hidden&quot;, &quot;false&quot;);
                button.setAttribute(&quot;aria-expanded&quot;, &quot;true&quot;);
        }
        else
        {
                content.setAttribute(&quot;aria-hidden&quot;, &quot;true&quot;);
                button.setAttribute(&quot;aria-expanded&quot;, &quot;false&quot;);
        }

        event.preventDefault();
}

window.onload = init;
</code>
</pre>

    <h2>Notes</h2>

    <p>Uses the HTML <a href="http://www.paciellogroup.com/blog/2014/08/using-the-tabindex-attribute/"><code>tabindex</code></a> attribute with a value of 0. This places the <code>&lt;span&gt;</code> into the tab order based on its location in the source code. The visual appearance of the button changes when focus moves to it.</p>

    <p>Uses the ARIA <a href="http://www.w3.org/TR/wai-aria/roles"><code>role</code></a> attribute with a value of <a href="http://www.w3.org/TR/wai-aria/roles#button">button</a>. This instructs the browser to expose the <code>&lt;span&gt;</code> element as a button through its accessibility API. This information is used by assistive technologies to inform users what they&#39;re dealing with.</p>

    <p>Keyboard interaction for the button control is handled through scripting. Both enter and space key events are captured, and used to trigger the button&#39;s expected behaviour.</p>

    <p>The <a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-expanded"><code>aria-expanded</code></a> attribute is used to indicate the state of the disclosure widget. It is applied to the <code>&lt;span&gt;</code> so that assistive technologies can determine the state of the widget whether it is expanded or collapsed. The <code>aria-expanded</code> attribute is set to false (collapsed) initially, then scripted to toggle between true and false whenever the button is activated.</p>

    <p>The <a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-controls"><code>aria-controls</code></a> attribute is used to create a relationship between the <code>&lt;span&gt;</code> and the <code>&lt;div&gt;</code> that contains the content. It takes the idref of the <code>&lt;div&gt;</code> as its value. This enables assistive technologies to provide specific commands for moving focus from the <code>&lt;span&gt;</code> to the <code>&lt;div&gt;</code>.</p>

    <p>The <a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-hidden"><code>aria-hidden</code></a> attribute indicates the state of the <code>&lt;div&gt;</code> containing the content. It is used regardless of the method used to toggle the content&#39;s visibility. The <code>aria-hidden</code> attribute is set to true (hidden) initially, then scripted to toggle between false and true whenever the button is activated.</p>

    <p>The visible style of the <code>&lt;button&gt;</code> when pressed is hooked to the <code>aria-expanded</code> attribute. Similarly the visibility of the <code>&lt;div&gt;</code> is hooked to the <code>aria-hidden</code> attribute using <a href="http://www.smashingmagazine.com/2013/08/20/semantic-css-with-intelligent-selectors">CSS selectors</a>. This has no direct impact on accessibility, but it creates a cleaner separation between structure and design.</p>
</body>
</html>
