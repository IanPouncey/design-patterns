<!DOCTYPE html>

<html lang="en">
<head>
<title>Disclosure button: button element</title>
<meta charset="UTF-8" />
<link rel="stylesheet" type="text/css" href="css/basic.css" />
<link rel="stylesheet" type="text/css" href="css/disclosure.css" />
<script type="text/javascript" src="js/disclosure.js"></script>
</head>

<body>
<h1>Disclosure button: button element</h1>

<p>The disclosure button on this page has been created using the <a href="http://www.w3.org/TR/html/forms.html#the-button-element"><code>&lt;button&gt;</code></a> element, with scripting to provide the expected behaviour. This design pattern uses <a href="http://www.w3.org/TR/wai-aria/">ARIA</a> to polyfill accessibility.</p>

<h2>Example</h2>

<div id="example">
<button id="button" aria-expanded="false" aria-controls="content">Foo<span id="icon" aria-hidden="true"></span></button>

<div id="content" aria-hidden="true">
<p>Lorem ipsum dolar sit amet...</p>
</div>
</div>

<h2>Code</h2>

<h3>HTML</h3>

<pre><code>
&lt;button id="button" aria-expanded="false" aria-controls="content"&gt;Foo&lt;span id="icon" aria-hidden="true"&gt;&lt;/span&gt;&lt;/button&gt;

&lt;div id="content" aria-hidden="true"&gt;
&lt;p&gt;Lorem ipsum dolar sit amet...&lt;/p&gt;
&lt;/div&gt;
</code></pre>

<h3>JavaScript</h3>

<pre><code>
function init()
{
	document.getElementById("button").addEventListener("click", toggleDisclosure);
}

function toggleDisclosure(event)
{
	var button = document.getElementById("button");
	var content = document.getElementById("content");

    if(content.getAttribute("aria-hidden") == "true")
	{
		content.setAttribute("aria-hidden", "false");
		button.setAttribute("aria-expanded", "true");
	}
	else
	{
		content.setAttribute("aria-hidden", "true");
		button.setAttribute("aria-expanded", "false");
	}
}

window.onload = init;
</pre></code>

<h3>CSS</h3>

<pre><code>
/* button */

button 
{
    display: block;
	width: 7em;
    font-size: 1.1em;
    font-weight: bold;
    text-align: left;
    padding: 0.5em 1em;
    margin 1em auto;
    color: #ccc;
    background-color: #555;
    border: 0 none;
    border-radius: 3px;
    text-shadow: 0 -1px 0 #000;
    box-shadow: 0 1px 0 #666, 0 2px 0 #444, 0 2px 2px rgba(0,0,0,0.6);
}

button:hover, button:focus 
{
    background-color: #333;
    color: #fff;
    text-shadow: 0 -1px 0 #444, 0 0 5px #ffd, 0 0 8px #fff;
    box-shadow: 0 1px 0 #666, 0 2px 0 #444, 0 2px 2px rgba(0,0,0,0.9);
	cursor: pointer;
}

button[aria-expanded="false"] #icon:after
{
    font-size: 0.75em;
	padding-left: 0.5em;
    content: "\25BC";
}

button[aria-expanded="true"] #icon:after 
{
    font-size: 0.75em;
	padding-left: 0.5em;
	content: "\25B2";
}

/* content panel */

div[aria-hidden="true"] 
{
    display: none;
}

div[aria-hidden="false"]
{
    display: block;
    border: 1px #000 solid;
    padding: 1em;
    background: #555;
    color: #FFF;
}
</code></pre>

<h2>Notes</h2>

<p>Using the <code>&lt;button&gt;</code> element means the browser handles keyboard interaction automatically. The button can be focused on with the keyboard, and it can be activated using either the space or enter keys.</p>

<p>The <a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-expanded"><code>aria-expanded</code></a> attribute is used to indicate the state of the disclosure widget. It is applied to the <code>&lt;button&gt;</code> so that assistive technologies can determine the state of the widget whether it is expanded or collapsed. The <code>aria-expanded</code> attribute is set to false (collapsed) initially, then scripted to toggle between true and false whenever the button is activated.</p>

<p>The <a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-controls"><code>aria-controls</code></a> attribute is used to create a relationship between the <code>&lt;button&gt;</code> and the <code>&lt;div&gt;</code> that contains the content. It takes the idref of the <code>&lt;div&gt;</code> as its value. This enables assistive technologies to provide specific commands for moving focus from the <code>&lt;button&gt;</code> to the <code>&lt;div&gt;</code>.</p>

<p>The <a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-hidden"><code>aria-hidden</code></a> attribute indicates the state of the <code>&lt;div&gt;</code> containing the content. It is used regardless of the method used to toggle the content&#39;s visibility. The <code>aria-hidden</code> attribute is set to true (hidden) initially, then scripted to toggle between false and true whenever the button is activated.</p>

<p>The visible style of the <code>&lt;button&gt;</code> when pressed is hooked to the <code>aria-expanded</code> attribute. Similarly the visibility of the <code>&lt;div&gt;</code> is hooked to the <code>aria-hidden</code> attribute using <a href="http://www.smashingmagazine.com/2013/08/20/semantic-css-with-intelligent-selectors">CSS selectors</a>. This has no direct impact on accessibility, but it creates a cleaner separation between structure and design.</p>

</body>
</html>
